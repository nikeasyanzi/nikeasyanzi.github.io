{{- define "main" }}

<article class="post-single">
  <header class="post-header">
    {{ partial "breadcrumbs.html" . }}
    <h1 class="post-title">
      {{ .Title }}
      {{- if .Draft }}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end }}
    </h1>
    {{- if .Description }}
    <div class="post-description">
      {{ .Description }}
    </div>
    {{- end }}
    {{- if not (.Param "hideMeta") }}
    <div class="post-meta">
      {{- partial "post_meta.html" . -}}
      {{- partial "translation_list.html" . -}}
      {{- partial "edit_post.html" . -}}
      {{- partial "post_canonical.html" . -}}
    </div>
    {{- end }}
  </header>
  {{- $isHidden := .Params.showtoc | default (.Site.Params.showtoc) | default false }}
  {{- if and (not $isHidden) (.TableOfContents) }}
  <aside id="toc-container" class="toc-container">
    {{- partial "toc.html" . }}
  </aside>
  {{- end }}
  
  {{- if not (.Param "hideMeta") }}
  {{- if .Params.tags }}
  <div class="post-tags" style="margin: 20px 0;">
    {{- range .Params.tags }}
    <a href="{{ "tags/" | relLangURL }}{{ . | urlize }}/">#{{ . }}</a>
    {{- end }}
  </div>
  {{- end }}
  {{- end }}

  {{- if .Content }}
  <div class="post-content">
    {{- if not (.Param "disableAnchoredHeadings") }}
    {{- partial "anchored_headings.html" .Content -}}
    {{- else }}{{ .Content }}{{ end }}
  </div>
  {{- end }}

  <footer class="post-footer">
    {{- partial "post_nav_links.html" . -}}
    {{- partial "share_icons.html" . -}}
  </footer>

  {{- if and (.Param "comments") (not (eq .Site.Params.disqusShortname "")) }}
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = '{{ .Permalink }}';
      this.page.identifier = '{{ .File.UniqueID }}';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://{{ .Site.Params.disqusShortname }}.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  {{- end }}
</article>

{{- end }}{{/* end main */}}
